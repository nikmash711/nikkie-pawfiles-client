{"ast":null,"code":"import _toConsumableArray from \"/Users/nikkiemashian/Documents/Thinkful/Pawfiles/pawfiles/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/nikkiemashian/Documents/Thinkful/Pawfiles/pawfiles/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { SHOW_PAWFILE_FORM, CHANGE_SORTING_PETS_METHOD, ADDING_NEW_REMINDER, TOGGLE_NAVBAR, DELETE_REMINDER, CHANGE_CURRENT_PET_ID, SHOW_MEDICAL_FORM, SUBMIT_MEDICAL_FORM, SHOW_MEMORY_FORM, SUBMIT_MEMORY_FORM, CHANGE_SEARCH_TERM, CHANGE_CATEGORY_FILTER } from '../actions/index';\nimport { FETCH_PAWFILES_SUCCESS, FETCH_INDIVIDUAL_PAWFILE_SUCCESS, CHANGE_PAWFILES_PENDING, CHANGE_INDIVIDUAL_PAWFILE_PENDING, FETCH_INDIVIDUAL_PAWFILE_REQUEST, FETCH_INDIVIDUAL_PAWFILE_ERROR, CHANGE_ERROR, SUBMIT_PAWFILE_REQUEST, SUBMIT_PAWFILE_SUCCESS, DELETE_PAWFILE_REQUEST, DELETE_PAWFILE_SUCCESS } from '../actions/pawfile-crud'; //dummy initial state \n\nvar initialState = {\n  user: {\n    firstName: 'Nikkie',\n    lastName: 'Mashian'\n  },\n  sortingPetsMethod: \"\",\n  showPawfileForm: false,\n  showMedicalForm: false,\n  showMemoryForm: false,\n  currentPetId: undefined,\n  currentSearchTerm: \"\",\n  categoryFilter: \"\",\n  toggleNavbar: false,\n  pawfiles: [],\n  individualPawfile: {},\n  pawfilesPending: true,\n  individualPawfilePending: true,\n  error: \"\"\n};\nexport var pawfileReducer = function pawfileReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  //Either when user clicks \"add new pawfile\", or clicks to edit a current pawfile. Need to set the currentPetId to either the id of the pet being edited, or undefined if it's a new pet/closing form\n  if (action.type === SHOW_PAWFILE_FORM) {\n    return Object.assign({}, state, {\n      showPawfileForm: action.bool,\n      currentPetId: action.currentPetId\n    });\n  } else if (action.type === SUBMIT_MEDICAL_FORM) {\n    var pawfileToUpdate = _objectSpread({}, state.pawfiles.find(function (pawfile) {\n      return pawfile.id == action.currentPetId;\n    })); //check if there's any previous posts for this pet. How we handle adding the new post depends on this.\n\n\n    var previousPosts = pawfileToUpdate.posts ? _toConsumableArray(pawfileToUpdate.posts) : '';\n\n    if (previousPosts) {\n      pawfileToUpdate.posts = [].concat(_toConsumableArray(pawfileToUpdate.posts), [action.values]);\n    } else {\n      pawfileToUpdate.posts = [action.values];\n    } //check if there's any previous vaccinations, prescriptions, etc. for this pet. How we handle adding the new ones depends on this.\n\n\n    if (action.values.vaccinations) {\n      var vaccinationList = action.values.vaccinations.map(function (vaccination) {\n        return {\n          name: vaccination,\n          date: action.values.date\n        };\n      });\n      var previousVaccinations = pawfileToUpdate.vaccinations ? _toConsumableArray(pawfileToUpdate.vaccinations) : '';\n\n      if (previousVaccinations) {\n        pawfileToUpdate.vaccinations = [].concat(_toConsumableArray(pawfileToUpdate.vaccinations), _toConsumableArray(vaccinationList));\n      } else {\n        pawfileToUpdate.vaccinations = _toConsumableArray(vaccinationList);\n      }\n    }\n\n    if (action.values.prescriptions) {\n      var prescriptionList = action.values.prescriptions.map(function (prescription) {\n        return {\n          name: prescription,\n          date: action.values.date\n        };\n      });\n      var previousPrescriptions = pawfileToUpdate.prescriptions ? _toConsumableArray(pawfileToUpdate.prescriptions) : '';\n\n      if (previousPrescriptions) {\n        pawfileToUpdate.prescriptions = [].concat(_toConsumableArray(pawfileToUpdate.prescriptions), _toConsumableArray(prescriptionList));\n      } else {\n        pawfileToUpdate.prescriptions = _toConsumableArray(prescriptionList);\n      }\n    }\n\n    var newArrayOfPawfiles = state.pawfiles.map(function (item) {\n      return item.id == action.currentPetId ? pawfileToUpdate : item;\n    });\n    return Object.assign({}, state, {\n      pawfiles: newArrayOfPawfiles\n    });\n  } else if (action.type === SUBMIT_MEMORY_FORM) {\n    var _pawfileToUpdate = _objectSpread({}, state.pawfiles.find(function (pawfile) {\n      return pawfile.id == action.currentPetId;\n    }));\n\n    var _previousPosts = _pawfileToUpdate.posts ? _toConsumableArray(_pawfileToUpdate.posts) : '';\n\n    if (_previousPosts) {\n      _pawfileToUpdate.posts = [].concat(_toConsumableArray(_pawfileToUpdate.posts), [action.values]);\n    } else {\n      _pawfileToUpdate.posts = [action.values];\n    }\n\n    var _newArrayOfPawfiles = state.pawfiles.map(function (item) {\n      return item.id == action.currentPetId ? _pawfileToUpdate : item;\n    });\n\n    return Object.assign({}, state, {\n      pawfiles: _newArrayOfPawfiles\n    });\n  } else if (action.type === ADDING_NEW_REMINDER) {\n    var newReminder = action.values; //create a new obj -this was the problem (I was directly mutating state)\n\n    var _pawfileToUpdate2 = _objectSpread({}, state.pawfiles.find(function (pawfile) {\n      return pawfile.id == action.currentPetId;\n    }));\n\n    var previousReminders = _pawfileToUpdate2.reminders ? _toConsumableArray(_pawfileToUpdate2.reminders) : ''; //\n\n    if (previousReminders) {\n      _pawfileToUpdate2.reminders = [].concat(_toConsumableArray(_pawfileToUpdate2.reminders), [newReminder]);\n    } else {\n      _pawfileToUpdate2.reminders = [newReminder];\n    }\n\n    var _newArrayOfPawfiles2 = state.pawfiles.map(function (item) {\n      return item.id == action.currentPetId ? _pawfileToUpdate2 : item;\n    });\n\n    return Object.assign({}, state, {\n      pawfiles: _newArrayOfPawfiles2\n    });\n  } else if (action.type === DELETE_REMINDER) {\n    var _pawfileToUpdate3 = _objectSpread({}, state.pawfiles.find(function (pawfile) {\n      return pawfile.id == action.currentPetId;\n    }));\n\n    var updatedReminders = _pawfileToUpdate3.reminders.filter(function (reminder) {\n      return reminder.id !== action.reminderId;\n    });\n\n    _pawfileToUpdate3.reminders = updatedReminders; // const updatedPawfile = Object.assign({}, state.pawfiles.find(pawfile=> pawfile.id==action.currentPetId), {\n    //   pawfileToUpdate\n    // })\n\n    var _newArrayOfPawfiles3 = state.pawfiles.map(function (item) {\n      return item.id == action.currentPetId ? _pawfileToUpdate3 : item;\n    });\n\n    console.log('newArrayOfPawfiles is', _newArrayOfPawfiles3);\n    return Object.assign({}, state, {\n      pawfiles: _newArrayOfPawfiles3\n    });\n  } else if (action.type === CHANGE_SORTING_PETS_METHOD) {\n    return Object.assign({}, state, {\n      sortingPetsMethod: action.sortMethod\n    });\n  } else if (action.type === TOGGLE_NAVBAR) {\n    if (action.bool === true || action.bool === false) {\n      return Object.assign({}, state, {\n        toggleNavbar: action.bool\n      });\n    }\n\n    return Object.assign({}, state, {\n      toggleNavbar: !state.toggleNavbar\n    });\n  } else if (action.type === CHANGE_CURRENT_PET_ID) {\n    console.log('changing id', action.currentPetId);\n    return Object.assign({}, state, {\n      currentPetId: action.currentPetId\n    });\n  } else if (action.type === SHOW_MEDICAL_FORM) {\n    return Object.assign({}, state, {\n      showMedicalForm: action.bool\n    });\n  } else if (action.type === SHOW_MEMORY_FORM) {\n    return Object.assign({}, state, {\n      showMemoryForm: action.bool\n    });\n  } else if (action.type === CHANGE_SEARCH_TERM) {\n    return Object.assign({}, state, {\n      currentSearchTerm: action.searchTerm\n    });\n  } else if (action.type === CHANGE_CATEGORY_FILTER) {\n    return Object.assign({}, state, {\n      categoryFilter: action.categoryFilter\n    });\n  } else if (action.type === CHANGE_ERROR) {\n    return Object.assign({}, state, {\n      error: action.bool\n    });\n  } else if (action.type === FETCH_PAWFILES_SUCCESS) {\n    console.log('in success, fetched', action.pawfiles);\n    return Object.assign({}, state, {\n      pawfiles: action.pawfiles,\n      pawfilesPending: false\n    });\n  } else if (action.type === FETCH_INDIVIDUAL_PAWFILE_SUCCESS) {\n    console.log('in success for indiv pawfile, fetched', action.pawfile);\n    return Object.assign({}, state, {\n      individualPawfile: action.pawfile,\n      individualPawfilePending: false\n    });\n  } else if (action.type === FETCH_INDIVIDUAL_PAWFILE_REQUEST) {\n    return Object.assign({}, state, {\n      individualPawfilePending: true\n    });\n  } else if (action.type === FETCH_INDIVIDUAL_PAWFILE_ERROR) {\n    console.log('in error of fetching');\n    return Object.assign({}, state, {\n      individualPawfilePending: false,\n      error: true\n    });\n  } else if (action.type === CHANGE_PAWFILES_PENDING) {\n    console.log('changing pending to', action.bool);\n    return Object.assign({}, state, {\n      pawfilesPending: action.bool\n    });\n  } else if (action.type === CHANGE_INDIVIDUAL_PAWFILE_PENDING) {\n    return Object.assign({}, state, {\n      individualPawfilePending: action.bool\n    });\n  } else if (action.type === SUBMIT_PAWFILE_REQUEST) {\n    return Object.assign({}, state, {\n      pawfilesPending: true\n    });\n  } else if (action.type === SUBMIT_PAWFILE_SUCCESS) {\n    //if its editing an existing pawfile: \n    if (action.currentPetId) {\n      console.log('updating in reducer with pawfile', action.pawfile);\n      var updatedPawfile = action.pawfile;\n\n      var _newArrayOfPawfiles4 = state.pawfiles.map(function (item) {\n        return item.id == action.currentPetId ? updatedPawfile : item;\n      });\n\n      return Object.assign({}, state, {\n        pawfiles: _newArrayOfPawfiles4,\n        // individualPawfile: action.pawfile,\n        pawfilesPending: false\n      });\n    } //if its a new obj\n\n\n    return Object.assign({}, state, {\n      pawfiles: [].concat(_toConsumableArray(state.pawfiles), [action.pawfile]),\n      pawfilesPending: false\n    });\n  } else if (action.type === DELETE_PAWFILE_REQUEST) {\n    return Object.assign({}, state, {\n      pawfilesPending: true\n    });\n  } else if (action.type === DELETE_PAWFILE_SUCCESS) {\n    console.log('in deleting success reducer');\n\n    var _newArrayOfPawfiles5 = state.pawfiles.filter(function (pawfile) {\n      return pawfile.id !== action.currentPetId;\n    });\n\n    return Object.assign({}, state, {\n      pawfiles: _newArrayOfPawfiles5,\n      pawfilesPending: false\n    });\n  }\n\n  return state;\n}; //load all the pawfiles in state regardless of page, and then display what you want from that state. differentiate state from display.","map":{"version":3,"sources":["/Users/nikkiemashian/Documents/Thinkful/Pawfiles/pawfiles/client/src/reducers/pawfile-reducer.js"],"names":["SHOW_PAWFILE_FORM","CHANGE_SORTING_PETS_METHOD","ADDING_NEW_REMINDER","TOGGLE_NAVBAR","DELETE_REMINDER","CHANGE_CURRENT_PET_ID","SHOW_MEDICAL_FORM","SUBMIT_MEDICAL_FORM","SHOW_MEMORY_FORM","SUBMIT_MEMORY_FORM","CHANGE_SEARCH_TERM","CHANGE_CATEGORY_FILTER","FETCH_PAWFILES_SUCCESS","FETCH_INDIVIDUAL_PAWFILE_SUCCESS","CHANGE_PAWFILES_PENDING","CHANGE_INDIVIDUAL_PAWFILE_PENDING","FETCH_INDIVIDUAL_PAWFILE_REQUEST","FETCH_INDIVIDUAL_PAWFILE_ERROR","CHANGE_ERROR","SUBMIT_PAWFILE_REQUEST","SUBMIT_PAWFILE_SUCCESS","DELETE_PAWFILE_REQUEST","DELETE_PAWFILE_SUCCESS","initialState","user","firstName","lastName","sortingPetsMethod","showPawfileForm","showMedicalForm","showMemoryForm","currentPetId","undefined","currentSearchTerm","categoryFilter","toggleNavbar","pawfiles","individualPawfile","pawfilesPending","individualPawfilePending","error","pawfileReducer","state","action","type","Object","assign","bool","pawfileToUpdate","find","pawfile","id","previousPosts","posts","values","vaccinations","vaccinationList","map","vaccination","name","date","previousVaccinations","prescriptions","prescriptionList","prescription","previousPrescriptions","newArrayOfPawfiles","item","newReminder","previousReminders","reminders","updatedReminders","filter","reminder","reminderId","console","log","sortMethod","searchTerm","updatedPawfile"],"mappings":"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","sourcesContent":["import {SHOW_PAWFILE_FORM, CHANGE_SORTING_PETS_METHOD, ADDING_NEW_REMINDER, TOGGLE_NAVBAR, DELETE_REMINDER, CHANGE_CURRENT_PET_ID, SHOW_MEDICAL_FORM, SUBMIT_MEDICAL_FORM, SHOW_MEMORY_FORM, SUBMIT_MEMORY_FORM, CHANGE_SEARCH_TERM, CHANGE_CATEGORY_FILTER,} from '../actions/index';\n\nimport {FETCH_PAWFILES_SUCCESS, FETCH_INDIVIDUAL_PAWFILE_SUCCESS, CHANGE_PAWFILES_PENDING, CHANGE_INDIVIDUAL_PAWFILE_PENDING, FETCH_INDIVIDUAL_PAWFILE_REQUEST, FETCH_INDIVIDUAL_PAWFILE_ERROR, CHANGE_ERROR, SUBMIT_PAWFILE_REQUEST, SUBMIT_PAWFILE_SUCCESS, DELETE_PAWFILE_REQUEST, DELETE_PAWFILE_SUCCESS} from '../actions/pawfile-crud'\n\n//dummy initial state \nconst initialState = {\n  user: {firstName: 'Nikkie', lastName: 'Mashian'},\n  sortingPetsMethod: \"\",\n  showPawfileForm: false,\n  showMedicalForm: false,\n  showMemoryForm: false,\n  currentPetId: undefined,\n  currentSearchTerm: \"\",\n  categoryFilter: \"\",\n  toggleNavbar:false,\n  pawfiles: [],\n  individualPawfile: {},\n  pawfilesPending: true,\n  individualPawfilePending: true,\n  error:\"\"\n};\n\nexport const pawfileReducer = (state = initialState, action)=> {\n\n  //Either when user clicks \"add new pawfile\", or clicks to edit a current pawfile. Need to set the currentPetId to either the id of the pet being edited, or undefined if it's a new pet/closing form\n  if(action.type=== SHOW_PAWFILE_FORM){\n    return Object.assign({}, state, {\n      showPawfileForm: action.bool,\n      currentPetId: action.currentPetId\n    })\n  }\n\n  else if(action.type===SUBMIT_MEDICAL_FORM){\n    let pawfileToUpdate = {...state.pawfiles.find(pawfile=> pawfile.id==action.currentPetId)};\n\n    //check if there's any previous posts for this pet. How we handle adding the new post depends on this.\n    let previousPosts = pawfileToUpdate.posts ? [...pawfileToUpdate.posts] : '';\n\n    if(previousPosts){\n      pawfileToUpdate.posts = [...pawfileToUpdate.posts, action.values];\n    }\n    else{\n      pawfileToUpdate.posts = [action.values];\n    }\n\n    //check if there's any previous vaccinations, prescriptions, etc. for this pet. How we handle adding the new ones depends on this.\n    if(action.values.vaccinations)\n    {\n      let vaccinationList = action.values.vaccinations.map(vaccination=>{\n        return {name: vaccination, date: action.values.date}\n      })\n\n      let previousVaccinations = pawfileToUpdate.vaccinations  ? [...pawfileToUpdate.vaccinations ] : '';\n\n      if(previousVaccinations){\n        pawfileToUpdate.vaccinations = [...pawfileToUpdate.vaccinations, ...vaccinationList];      \n      }\n      else{\n        pawfileToUpdate.vaccinations = [...vaccinationList];\n      }\n    }\n\n    if(action.values.prescriptions)\n    {\n      let prescriptionList = action.values.prescriptions.map(prescription=>{\n        return {name: prescription, date: action.values.date}\n      })\n\n      let previousPrescriptions = pawfileToUpdate.prescriptions  ? [...pawfileToUpdate.prescriptions ] : '';\n\n      if(previousPrescriptions){\n        pawfileToUpdate.prescriptions = [...pawfileToUpdate.prescriptions, ...prescriptionList];\n     \n      }\n      else{\n        pawfileToUpdate.prescriptions = [...prescriptionList];\n      }\n    }\n\n    const newArrayOfPawfiles = state.pawfiles.map((item)=> (item.id==action.currentPetId ? pawfileToUpdate : item))\n\n    return Object.assign({}, state, {\n      pawfiles: newArrayOfPawfiles\n    })\n  }\n\n  else if(action.type===SUBMIT_MEMORY_FORM){\n    let pawfileToUpdate = {...state.pawfiles.find(pawfile=> pawfile.id==action.currentPetId)};\n\n    let previousPosts = pawfileToUpdate.posts ? [...pawfileToUpdate.posts] : '';\n\n    if(previousPosts){\n      pawfileToUpdate.posts = [...pawfileToUpdate.posts, action.values];\n    }\n    else{\n      pawfileToUpdate.posts = [action.values];\n    }\n\n    const newArrayOfPawfiles = state.pawfiles.map((item)=> (item.id==action.currentPetId ? pawfileToUpdate : item))\n\n    return Object.assign({}, state, {\n      pawfiles: newArrayOfPawfiles\n    })\n  }\n\n  else if (action.type=== ADDING_NEW_REMINDER){\n    const newReminder = action.values;\n\n    //create a new obj -this was the problem (I was directly mutating state)\n    let pawfileToUpdate = {...state.pawfiles.find(pawfile=> pawfile.id==action.currentPetId)};\n\n    let previousReminders = pawfileToUpdate.reminders ? [...pawfileToUpdate.reminders] : '';\n\n    //\n    if(previousReminders){\n      pawfileToUpdate.reminders=[...pawfileToUpdate.reminders, newReminder];\n    }\n    else{\n      pawfileToUpdate.reminders=[newReminder];\n    }\n\n    const newArrayOfPawfiles = state.pawfiles.map((item)=> (item.id==action.currentPetId ? pawfileToUpdate : item))\n\n    return Object.assign({}, state, {\n        pawfiles: newArrayOfPawfiles\n    })\n  }\n\n  else if(action.type=== DELETE_REMINDER){\n    let pawfileToUpdate = {...state.pawfiles.find(pawfile=> pawfile.id==action.currentPetId)};\n\n    const updatedReminders = pawfileToUpdate.reminders.filter((reminder)=> (reminder.id!==action.reminderId));\n\n    pawfileToUpdate.reminders=updatedReminders;\n\n    // const updatedPawfile = Object.assign({}, state.pawfiles.find(pawfile=> pawfile.id==action.currentPetId), {\n    //   pawfileToUpdate\n    // })\n\n    const newArrayOfPawfiles = state.pawfiles.map((item)=> (item.id==action.currentPetId ? pawfileToUpdate : item))\n\n    console.log('newArrayOfPawfiles is', newArrayOfPawfiles)\n\n    return Object.assign({}, state, {\n      pawfiles: newArrayOfPawfiles\n    })\n  }\n\n  else if (action.type=== CHANGE_SORTING_PETS_METHOD){\n    return Object.assign({}, state, {\n      sortingPetsMethod: action.sortMethod,\n    })\n  }\n\n  else if (action.type===TOGGLE_NAVBAR){\n    if(action.bool===true || action.bool===false){\n      return Object.assign({}, state, {\n        toggleNavbar: action.bool,\n      })\n    }\n    return Object.assign({}, state, {\n      toggleNavbar: !state.toggleNavbar,\n    })\n  }\n\n  else if(action.type===CHANGE_CURRENT_PET_ID){\n    console.log('changing id', action.currentPetId);\n    return Object.assign({}, state, {\n      currentPetId: action.currentPetId\n    })\n  }\n\n  else if(action.type===SHOW_MEDICAL_FORM){\n    return Object.assign({}, state, {\n      showMedicalForm: action.bool\n    })\n  }\n\n  else if(action.type===SHOW_MEMORY_FORM){\n    return Object.assign({}, state, {\n      showMemoryForm: action.bool\n    })\n  }\n\n  else if(action.type===CHANGE_SEARCH_TERM){\n    return Object.assign({}, state, {\n      currentSearchTerm: action.searchTerm,\n    })\n  }\n\n  else if(action.type===CHANGE_CATEGORY_FILTER){\n    return Object.assign({}, state, {\n      categoryFilter: action.categoryFilter,\n    })\n  }\n\n  else if(action.type===CHANGE_ERROR){\n    return Object.assign({}, state, {\n      error: action.bool,\n    })\n  }\n\n  else if (action.type === FETCH_PAWFILES_SUCCESS) {\n    console.log('in success, fetched', action.pawfiles);\n    return Object.assign({}, state, {\n      pawfiles: action.pawfiles,\n      pawfilesPending: false,\n    })\n  }\n\n  else if (action.type===FETCH_INDIVIDUAL_PAWFILE_SUCCESS){\n    console.log('in success for indiv pawfile, fetched', action.pawfile);\n    return Object.assign({}, state, {\n      individualPawfile: action.pawfile,\n      individualPawfilePending: false,\n    })\n  }\n\n  else if (action.type===FETCH_INDIVIDUAL_PAWFILE_REQUEST){\n    return Object.assign({}, state, {\n      individualPawfilePending: true,\n    })\n  }\n\n  else if (action.type===FETCH_INDIVIDUAL_PAWFILE_ERROR){\n    console.log('in error of fetching');\n    return Object.assign({}, state, {\n      individualPawfilePending: false,\n      error: true,\n    })\n  }\n\n  else if(action.type===CHANGE_PAWFILES_PENDING){\n    console.log('changing pending to', action.bool);\n    return Object.assign({}, state, {\n      pawfilesPending: action.bool,\n    })\n  }\n\n  else if(action.type===  CHANGE_INDIVIDUAL_PAWFILE_PENDING){\n    return Object.assign({}, state, {\n      individualPawfilePending: action.bool,\n    })\n  }\n\n  else if (action.type===SUBMIT_PAWFILE_REQUEST){\n    return Object.assign({}, state, {\n      pawfilesPending: true,\n    })\n  }\n\n  else if(action.type===SUBMIT_PAWFILE_SUCCESS){\n    //if its editing an existing pawfile: \n    if(action.currentPetId){\n      console.log('updating in reducer with pawfile', action.pawfile);\n      const updatedPawfile = action.pawfile;\n\n      const newArrayOfPawfiles = state.pawfiles.map((item)=> (item.id==action.currentPetId ? updatedPawfile : item))\n  \n      return Object.assign({}, state, {\n          pawfiles: newArrayOfPawfiles,\n          // individualPawfile: action.pawfile,\n          pawfilesPending: false,\n      })\n    }\n\n    //if its a new obj\n    return Object.assign({}, state, {\n      pawfiles: [\n        ...state.pawfiles,\n        action.pawfile\n      ],\n      pawfilesPending: false,\n    })\n  }\n\n  else if (action.type===DELETE_PAWFILE_REQUEST){\n    return Object.assign({}, state, {\n      pawfilesPending: true,\n    })\n  }\n\n  else if(action.type===DELETE_PAWFILE_SUCCESS){\n    console.log('in deleting success reducer')\n    const newArrayOfPawfiles = state.pawfiles.filter((pawfile)=> (pawfile.id!==action.currentPetId));\n\n    return Object.assign({}, state, {\n      pawfiles: newArrayOfPawfiles,\n      pawfilesPending: false,\n    })\n  }\n\n  return state;\n}\n\n//load all the pawfiles in state regardless of page, and then display what you want from that state. differentiate state from display. \n"]},"metadata":{},"sourceType":"module"}